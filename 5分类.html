<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="ie=edge" http-equiv="X-UA-Compatible">
    <title>Document</title>
    <link href="./css/normalize.css" rel="stylesheet">
    <link href="./css/fenlei.css" rel="stylesheet">
    <script src="./js/flexible.js"></script>
</head>

<body>
    <div class='container'>

        <!--头部开始-->
        <header>
            <!--顶部搜索部分开始-->
            <div class='top'>
                <a href="#">
                    <img alt="" src="./img/dw.png">
                </a>
                <a href="#">上海静安区店</a>
                <span></span>
                <div class='search'>
                    <span></span>
                    <!-- <img alt="" src="./img/fdj.png"> -->
                    <input placeholder="小龙虾" type="text">
                </div>
                <a href="#">
                    <img alt="" src="./img/tx.png">
                </a>

            </div>
            <!--顶部搜索部分结束-->
        </header>
        <!--头部结束-->

        <div class="banner">
            <div class="second toggle">新鲜水果</div>
            <div class="left">

                <div class="box dj">
                    <span>新鲜水果</span>
                    <div class="dier">121</div>
                </div>
                <div class="box">
                    <span>新鲜大虾</span>
                    <div class="dier">121</div>
                </div>
                <div class="box">
                    <span>新鲜鸡翅</span>
                    <div class="dier">121</div>
                </div>
                <div class="box">
                    <span>新鲜水果</span>
                    <div class="dier">121</div>
                </div>
                <div class="box">
                    <span>新鲜水果</span>
                    <div class="dier">121</div>
                </div>
                <div class="box">
                    <span>新鲜水果</span>
                    <div class="dier">121</div>
                </div>
                <div class="box">
                    <span>新鲜水果</span>
                    <div class="dier">121</div>
                </div>
                <div class="box ">
                    <span>新鲜蔬菜</span>
                    <div class="dier">121</div>
                </div>
            </div>
            <div class="right">
                <div class="box1">
                    <img alt="" src="./img/bxg.png">
                    <div class="wz">
                        <h3>海鲜肉百香果</h3>
                        <p>500g装</p>
                        <b>￥58</b>
                        <span>￥122</span>
                    </div>
                    <a href="">
                        <img alt="" src="./img/购物车.png">
                    </a>
                </div>
                <div class="box1">
                    <img alt="" src="./img/bxg.png">
                    <div class="wz">
                        <h3>海鲜肉百香果</h3>
                        <p>500g装</p>
                        <b>￥58</b>
                        <span>￥122</span>
                    </div>
                    <a href="">
                        <img alt="" src="./img/购物车.png">
                    </a>
                </div>
                <div class="box1">
                    <img alt="" src="./img/bxg.png">
                    <div class="wz">
                        <h3>海鲜肉百香果</h3>
                        <p>500g装</p>
                        <b>￥58</b>
                        <span>￥122</span>
                    </div>
                    <a href="">
                        <img alt="" src="./img/购物车.png">
                    </a>
                </div>
                <div class="box1">
                    <img alt="" src="./img/bxg.png">
                    <div class="wz">
                        <h3>海鲜肉百香果</h3>
                        <p>500g装</p>
                        <b>￥58</b>
                        <span>￥122</span>
                    </div>
                    <a href="">
                        <img alt="" src="./img/购物车.png">
                    </a>
                </div>
            </div>
            <div class="third toggle">新鲜水果</div>
            <div class="right1">
                <div class="box1">
                    <img alt="" src="./img/bxg.png">
                    <div class="wz">
                        <h3>海鲜肉百香果</h3>
                        <p>500g装</p>
                        <b>￥58</b>
                        <span>￥122</span>
                    </div>
                    <a href="">
                        <img alt="" src="./img/购物车.png">
                    </a>
                </div>
                <div class="box1">
                    <img alt="" src="./img/bxg.png">
                    <div class="wz">
                        <h3>海鲜肉百香果</h3>
                        <p>500g装</p>
                        <b>￥58</b>
                        <span>￥122</span>
                    </div>
                    <a href="">
                        <img alt="" src="./img/购物车.png">
                    </a>
                </div>
                <div class="box1">
                    <img alt="" src="./img/bxg.png">
                    <div class="wz">
                        <h3>海鲜肉百香果</h3>
                        <p>500g装</p>
                        <b>￥58</b>
                        <span>￥122</span>
                    </div>
                    <a href="">
                        <img alt="" src="./img/购物车.png">
                    </a>
                </div>
            </div>
        </div>
        <div class="bot">
            <div>
                <div></div>
                <span>首页</span>
            </div>
            <div>
                <div></div>
                <span>分类</span>
            </div>
            <div>
                <div></div>
                <span>食谱</span>
            </div>
            <div>
                <div></div>
                <span>订单</span>
            </div>
            <div>
                <div></div>
                <span>我的</span>
            </div>
        </div>
    </div>
    <script src="./js/jQuery.min.js"></script>
    <script>
        $(function () {


            $('.search input').focus(function () {
                $(this).siblings().hide();
                $(this).removeAttr('placeholder');
            })
            $('.search input').blur(function () {
                $(this).siblings().show();
                $(this).attr('placeholder', '小龙虾');
            })


            $('.box').click(function () {
                $(this).addClass('dj');
                $(this).siblings().removeClass('dj');

                $('.second').text($(this).find('span').text());
                $('.third').text($(this).find('span').text());
                if ($(this).find('span').text() == '新鲜大虾') {
                    $('.box1').children('img').attr('src', './img/daxia.gif')
                    $('.box1').find('h3').text('精选冷冻大虾');
                    $('.box1').find('b').text('￥48');
                }
                if ($(this).find('span').text() == '新鲜鸡翅') {
                    $('.box1').children('img').attr('src', './img/jc .gif')
                    $('.box1').find('h3').text('精选冷冻鸡翅膀');
                    $('.box1').find('b').text('￥78');
                }
                if ($(this).find('span').text() == '新鲜水果') {
                    $('.box1').children('img').attr('src', './img/bxg.png')
                    $('.box1').find('h3').text('海鲜肉百香果');
                    $('.box1').find('b').text('￥58');
                }
                if ($(this).find('span').text() == '新鲜蔬菜') {
                    $('.box1').children('img').attr('src', './img/sg.gif')
                    $('.box1').find('h3').text('新鲜蔬菜');
                }
            })

            // var index;
            // var that;
            // //根据地址栏的信息获取index;
            // index=location.search.substr(1);
            // //调用函数；
            // fz();

            //循环遍历注册点击事件；
            // $('.box').click(function () {
            //     //改变this指向；
            //     that=this;
            //     //切换左侧导航的类样式；
            //     // $(this).addClass('dj');
            //     // $(this).siblings().removeClass('dj');

            //     //修改分类的文字内容；
            //     // $('.toggle').text($(this).find('span').text());

            //     //获取索引；
            //     index = $(this).index();
            //     //调用函数；
            //     // fz();


            // })
            //封装函数；
            // function fz() {
            //     //切换左侧导航的类样式；
            //     $(that).addClass('dj');
            //     $(that).siblings().removeClass('dj');

            //     //修改分类的文字内容；
            //     $('.toggle').text($(that).find('span').text());
            //     //根据索引显示相对应的内容；
            //     if (index == 0) {
            //         $('.box1').children('img').attr('src', './img/daxia.gif')
            //         $('.box1').find('h3').text($(that).find('span').text());
            //     } else if (index == 1) {
            //         $('.box1').children('img').attr('src', './img/bxg.png')
            //         $('.box1').find('h3').text($(that).find('span').text());
            //     } else if (index == 2) {
            //         $('.box1').children('img').attr('src', './img/jc .gif')
            //         $('.box1').find('h3').text($(that).find('span').text());
            //     } else if (index == 3) {
            //         $('.box1').children('img').attr('src', './img/daxia.gif')
            //         $('.box1').find('h3').text($(that).find('span').text());
            //     }else if (index==4) {

            //     }
            // }

            //点击购物车，本地数据+1跳转到购物车
            $('.box1').children('a').click(function (e) {
                e.preventDefault();
                var that = $(this)
                var thatnum = that.siblings('.wz').children('b').text().slice(1).trim()



                function local() {
                    //获取本地数据；
                    var str = localStorage.getItem('list');
                    //判断：有则转为对象，无则为空；
                    //设置开关
                    var key = false;
                    if (str != null && str != '[]') {
                        var arr1 = JSON.parse(str);
                        arr1.forEach(function (item, index) {

                            //判断当价格是58的时候把里面的数量改成当前数量
                            if (item.numdj == thatnum) {
                                key = true;
                                item.namv = parseFloat(item.namv) + 1;

                            }

                        })
                        if (key == true) {

                            //当这个数据时直接返回就可以
                            return arr1;
                        } else if (key == false) {
                            console.log('进到本地有数据但没有当前数据里了');

                            //当没有这个数据时
                            //直接把当前页的数据推进去

                            if (thatnum == 58) {
                                arr1.push({
                                    img: './images/nav1.png',
                                    name: '海鲜肉百香果',
                                    width: '600g装',
                                    numdj: 58,
                                    namv: 1
                                })
                            } else if (thatnum == 48) {
                                arr1.push({
                                    img: './images/nav3.png',
                                    name: '精选冷冻大虾',
                                    width: '500g装',
                                    numdj: 48,
                                    namv: 1
                                })
                            } else if (thatnum == 78) {
                                arr1.push({
                                    img: './images/nav2.png',
                                    name: '精选冷冻鸡翅膀',
                                    width: '400g装',
                                    numdj: 78,
                                    namv: 1
                                })
                            }
                            return arr1

                        }

                    } else {
                        console.log('进到本地什么都没有里面了');
                        //当为空或者为空数组的清空的时候
                       var arr = [];
                        //先上传一个数组
                        //进行判断
                        if (thatnum == 58) {
                                arr.push({
                                    img: './images/nav1.png',
                                    name: '海鲜肉百香果',
                                    width: '600g装',
                                    numdj: 58,
                                    namv: 1
                                })
                            } else if (thatnum == 48) {
                                arr.push({
                                    img: './images/nav3.png',
                                    name: '精选冷冻大虾',
                                    width: '500g装',
                                    numdj: 48,
                                    namv: 1
                                })
                            } else if (thatnum == 78) {
                                arr.push({
                                    img: './images/nav2.png',
                                    name: '精选冷冻鸡翅膀',
                                    width: '400g装',
                                    numdj: 78,
                                    namv: 1
                                })
                            }
                        //返回推好的数组
                        return arr;
                    }
                };
                //调用该函数；
                var arr =local();

               
                //再上传 本地
                localStorage.setItem('list', JSON.stringify(arr))

                // 最后再跳转
                location.href = './cart.html';


            })



            $('.box1').children('img').click(function (e) {
                console.log(111);
                var num = $(this).siblings('.wz').children('b').text().slice(1).trim()
                console.log(num);
                if (num == 58) {
                    window.location.href = '7商品详情百香果.html?5'
                } else if (num == 48) {
                    window.location.href = '7商品详情大虾.html?5'
                } else if (num == 78) {
                    window.location.href = '7商品详情鸡翅.html?5'
                }
            })

            //底部导航栏跳转；
            $('.bot>div').click(function () {
                var ind = $(this).index();
                if (ind == 0) {
                    location.href = './index.html'
                } else if (ind == 1) {
                    return
                } else if (ind == 2) {
                    location.href = './食谱.html'
                } else if (ind == 3) {
                    location.href = './indent(订单).html'
                } else if (ind == 4) {
                    location.href = './me.html'
                }
            })
        })
    </script>
</body>

</html>